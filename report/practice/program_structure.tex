% !TEX root = ../thesis.tex

\section{Структура симуляційного програмного забезпечення}

Програма написана   на мові C++ та умовно поділяється на дві логічні частини: модуль обробки параметрів та модуль симуляції.

Модуль обробки параметрів дозволяє задавати розмір матриць, режим одноно гравця чи двох, межі перебору стратегій розрізання, параметри планувальника, характеристики обчислювальних модулів, параметрів мережі – bandwidth та latency без перековпіляції програми через параметри командного рядка.

Модуль симуляції генерує задачі для кожного з користувачів, зливає їх в один список та власне подає їх на симулятор, який повертає оброблені задачі з проставленими змінними часу початку та завершення роботи над задачею і номером обчислювального вузла, який обробляю цю  задачу.

Етапи роботи симулятора:
\begin{itemize}
	\item Перемішування списка очікуючих задач з метою емуляцїї отримання задач у випадковому порядку.
	
	\item Сортування списка очікуючих задач по складності у відповідності до пріорітетності задач та списка обчислювальних вузлів по потужності у відповідності до пріорітетності обчилювальних вузлів. Наприклад для minmax планувальника список очікуючих задач буде відсортованим від простої до складної, а список обчислювальних вузлів від потужного до повільного.
	
	\item Ініціалізація початкових задач для обчислювальних вузлів вилучаючи перші елементи з  відсортованих списків очікуючих задач та вузлів, проставлення початкового часу, який на даний момент рівний 0, та обчислення часу очікуваного завершення виконання задачі. Структури з посиланням на задачу, обчислювальний вузол та даними про початок та завершення виконання задачі поміщаються у чергу з пріорітетом по найменшому часу завершення.
	
	\item Взяти з пріорітетної черги задачу, яка буде найближчою по часу наступною виконаною задачею. Приняти час симуляції за час завершення взятої з черги задачі, додати задачу до списку виконаних задач разом із даними про час її завершення.
	
	\item Якщо список очікуючих задач не пустий, то вилучити перший елемент, поставити час початку як час симуляції, обчислити час завершення та додати у чергу з прірітетом, поставивши обчислювальний вузол як перший вільний із відсортованого списка вузлів.
	
	\item Якщо пріорітетна черга не пуста, то повернутися на крок 4.
	
	\item Знайти у списку виконаних задач найпізніші повернені задачі для кожного з користувачів та повернути їх час завершення.
\end{itemize}
