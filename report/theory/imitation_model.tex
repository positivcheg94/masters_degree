\section{Імплементація імітаційної моделі}

Імітаційна модель дозволяє симулювати процес множення матриць у розподіленому середовищі враховуючи як час на власне обчислення так і передачу даних.

Розглянемо задачу множення двох $N*N$ матриць M1 та M2. Позначимо за $n$ кількість рядків матриці М1 та відповідно стовбців матриці М2. Таким чином отримуємо 2 підматриці $n*N$ та $N*n$ які і формують одну задачу, що буде відіслана планувальнику. Таких задач буде $ \floor{ \frac{N}{n} } \times \floor{ \frac{N}{n} } $. Проте в обох матрицях М1 та М2 у випадку якщо n не дільник N буде залишок рядків М1 та стовбців М2 відповідно. Позначимо розмір залишка за  . Тому до основних задач ще потрібно додати задачі множення матриць $m*N$ та $N*n$, матриць $n*N$ та $N*m$ і одну задачу множення  $m*N$ та $N*m$.

Тобто задача множення матриць $N*N$ та $N*N$ розбивається на такі підзадачі:
\begin{itemize}
	\item $ \floor{ \frac{N}{n} } \times \floor{ \frac{N}{n} } $ множень матриць $n*N$ та $N*n$ 
	\item $ \floor{ \frac{N}{n} } $ множень матриць $m*N$ та $N*n$ 
	\item $ \floor{ \frac{N}{n} } $ множень матриць $n*N$ та $N*m$ 
	\item 1 множення матриць $m*N$ та $N*m$ 
\end{itemize}

Множення матриць $N1*N2$ та $N2*N3$ потребує $N1*N3*N2$ операцій множення та $N1*N3*(N2-1)$ операцій додавання. Позначимо за $AM$ коефіцієнт складності операції множення по відношенню до операції додавання. Тоді складність множення матриць $N1*N2$ та $N2*N3$ можна виразати у одиницях операцій додавання як:

\begin{equation}
\label{eq:complexity_fmla}
Complexity(N1,N2,N3) = N1*N3*( N2 *AM + N2 - 1)
\end{equation}

Позначивши потужність ОВ за P ( кількість операцій додавання / секунду ) та складність задачі С ( кількість операцій додавання ) отримаємо час, який ОВ витратить на обчислення задачі С:

\begin{equation}
\label{eq:processing_time_simple}
T_processing = \frac{C}{P}
\end{equation}

Також для множення матриць $N1*N2$ та $N2*N3$ потрібно переслати $N1*N2 + N2*N3$ елементів до обчислювалюного вузла, та отримати результат у розмірі $N1*N3$ елементів. Час на передачу даних обчислюється таким чином:

\begin{equation}
\label{eq:transfer_time}
T_transfer = latency + \frac{N1*N2+N2*N3+N1*N3}{bandwidth}
\end{equation}
де $latency$ визачає затримку між відправленням пакета від користувача до планувальника та $bandwidth$ пропускну здатність між користувачем та планувальником.

Загальний час на обробку задачі отримується з урахуванням \ref{eq:processing_time_simple} та \ref{eq:transfer_time}:

\begin{equation}
\label{eq:total_task_processing_time}
T = T_processing + T_transfer
\end{equation}

Для двох гравців вибираються n1 та n2, формуються задачі, додаются в загальний список та випадково перемішуются і подаются на планувальник. Час для кожного з гравців визначається як час повернення від планувальника до гравця останьої його задачі.